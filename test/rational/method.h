#pragma once

#include <assert.h>
#include <numeric>
#include "../../Rational.h"

void RationalTestToString() {
  Rational a(17, 18);
  assert(a.toString() == "17/18");

  a *= 2;
  assert(a.toString() == "17/9");

  a += Rational(1, 9);
  assert(a.toString() == "2");

  a = -a;
  assert(a.toString() == "-2");

  a += Rational(1, 18);
  assert(a.toString() == "-35/18");

  assert(Rational(5, 25).toString() == "1/5");
  assert(Rational(720, 120).toString() == "6");
  assert(Rational(2398754, 2398754).toString() == "1");

  a = Rational("17581758137556835713569823857135617851798235375165738917581668317581975"_bi,
               "2394762347671436872364761489758157878235720347504235000"_bi);

  assert(a.toString() == "703270325502273428542792954285424714071929415006629556703266732703279/95790493906857474894590459590326315129428813900169400");
}

void RationalTestAsDecimal() {
  Rational a(1, 7);
  assert(a.asDecimal(6) == "0.142857");
  assert(a.asDecimal(36) == "0.142857142857142857142857142857142857");

  assert(a.asDecimal(72) == "0.142857142857142857142857142857142857142857142857142857142857142857142857");
  assert(a.asDecimal(71) == "0.14285714285714285714285714285714285714285714285714285714285714285714286");
  assert(a.asDecimal(70) == "0.1428571428571428571428571428571428571428571428571428571428571428571429");
  assert(a.asDecimal(69) == "0.142857142857142857142857142857142857142857142857142857142857142857143");
  assert(a.asDecimal(68) == "0.14285714285714285714285714285714285714285714285714285714285714285714");
  assert(a.asDecimal(67) == "0.1428571428571428571428571428571428571428571428571428571428571428571");

  a = -a;
  assert(a.asDecimal(6) == "-0.142857");
  assert(a.asDecimal(36) == "-0.142857142857142857142857142857142857");

  assert(a.asDecimal(72) == "-0.142857142857142857142857142857142857142857142857142857142857142857142857");
  assert(a.asDecimal(71) == "-0.14285714285714285714285714285714285714285714285714285714285714285714286");
  assert(a.asDecimal(70) == "-0.1428571428571428571428571428571428571428571428571428571428571428571429");
  assert(a.asDecimal(69) == "-0.142857142857142857142857142857142857142857142857142857142857142857143");
  assert(a.asDecimal(68) == "-0.14285714285714285714285714285714285714285714285714285714285714285714");
  assert(a.asDecimal(67) == "-0.1428571428571428571428571428571428571428571428571428571428571428571");

  a = 91;
  assert(a.asDecimal(5) == "91.00000");

  a = -a;
  assert(a.asDecimal(5) == "-91.00000");

  a = "1351089758347589145123653129875819237513457240385738947534"_bi;
  assert(a.asDecimal(0) == "1351089758347589145123653129875819237513457240385738947534");

  a = -a;
  assert(a.asDecimal(0) == "-1351089758347589145123653129875819237513457240385738947534");

  a = Rational("534170357139759183275324"_bi, "1395710389571356123759"_bi);
  assert(a.asDecimal(12) == "382.722920980628");
}
